# RuneScape Snap
[![Get it from the Snap Store](https://snapcraft.io/static/images/badges/en/snap-store-black.svg)](https://snapcraft.io/runescape)

This repository contains the build file and wrappers necessary to run RuneScape and Oldschool RuneScape on Linux systems in a Snap container format.
RuneScape 3 does provide official Linux support, but is limited in it's supported distributions.
Old School RuneScape does not have any Linux specific installer, but is a Java based game and can be run with a Java runtime environment.
This Snap package resolves these dependencies issues allowing for the games to run on any Linux compatible system, with the Snap benefits of sandboxing and confinement.


## Install Instructions
Ensure snapd is installed. Snap is installed by default on most Ubuntu derivatives. [Instructions can be found here](https://docs.snapcraft.io/installing-snapd/6735)

At a terminal, run

`sudo snap install runescape`

Some systems may have graphical installers for Snap packages pre-setup. You might also want to consider `sudo snap install snap-store` to get the official Snap GUI installer.

## Can this project be trusted
Since this snap isn't produced by Jagex, people naturally are cautious that adding a middleman in the packaging of the game may enable account theft. 

The most significant concern over a project like this is it is feasible that the source code provided in the repository doesn't correspond to the source code that provides the snap actually distributed. 
The wrappers for this snap are all in pure Bash. As such it is interpretted rather than compiled, and so you can see the exact code that is run prior to the game in /snap/runescape/current/bin/ and I try keep it well written. This makes it easy to analyse. The game launchers themselves are fetched at runtime from Jagex and they are cryptographically verified during download, so it can be seen that the game code itself is also trustable.

However there is a secondary concern that the libraries that the snap bundles are not so trivially inspected and might themselves be backdoored. 
It is not possible to guarantee reproducible builds. However, in most cases a full versioned list of packages bundled in the snap can be found in /snap/runescape/current/snap/manifest.yaml
and it is therefore possible to compare the individual packages in the snap with what they claim to be.

In the majority of situations, this snap is built on Canonicals own Launchpad infrastructure. The builds can be viewed [here](https://launchpad.net/~build.snapcraft.io/+snap/21d275790466ab89ca14debcc46363d5/) 
and these builds contain the source location of the snap, the git tag they corresponded to at the time of being built and the name of the snap being built. Given Canonical runs the entire Ubuntu distribution and Snapcraft itself, I assume the community can consider them trustable and by extension binaries built by them to correspond to the source they claim. The combination of source repository and git tag is enough to detect any tampering in this scenario.

Ultimately however, all snaps with the package name of `runescape` should NEVER be installed with the --dangerous flag unless built by yourself or you know exactly what you are doing. 
I will never publish a .snap file anywhere other than the Snapcraft store itself, and these will ALWAYS have signature verification. If the --dangerous flag is ever required, it was not generated by me nor Canonical 
and there is no guarantees about its trustworthyness.

## Build Instructions
The snap can be built on any Linux system with snapd installed.

For machines with virtual machine support, instructions should be roughly as follows.

`sudo snap install snapcraft --classic`

`sudo snap install multipass`

`snapcraft`

`sudo snap install runescape_release.snap --dangerous`

The dangerous flag is required to install any snap package that lacks signature verification, such as those built locally. Sandboxing is unaffected.

If your machine does not have VM support, try building with the LXD backend with the instructions [here](https://snapcraft.io/docs/build-on-lxd) and follow the building with bases information. 

## Usage Instructions

Once installed, desktop icons should be available in your desktops standard start menu. You can also launch the game via the terminal. 

`runescape.rs3` or `snap run runescape.rs3`

`runescape.osrs` or `snap run runescape.osrs`

`runescape.reset` or `snap run runescape.reset`

In the event environmental variables need to be passed to the game to modify it's behaviour in any capacity, users can place a bash script in the snaps directory. E.G, ~/snap/runescape/current/ called 

`osrs-user-config`
 
`rs3-user-config`

which will be automatically loaded prior to the game if present. This allows for adding environmental variables to the games without having to mess with any root owned files or desktop entries.
Particularly, exports (such as Mesa debug environmental variables) and parameters for the game client, can be added, for example.

`echo "export PULSE_LATENCY_MSEC=100" > ~/snap/runescape/current/rs3-user-config`

Alternatively, users may pass the -h parameter ( E.G, `runescape.rs3 -h` ) to the launch scripts to see common overrides. These parameters will be preferred over any conflicting entries in the user-config files.

## General Info

The snap does not contain Jagex code, and will dynamically fetch this from the Jagex servers on first run.

### Why are the store reviews so bad?
Unfortunately, reviews in the majority of Linux app stores (Gnome Software/Discover/etc) are powered by the [ODRS service](https://odrs.gnome.org/), and ODRS policy is that packaging shouldn't matter and people are assumed to be reviewing the software itself, not the installation format which is assumed to be irrelevant.

As a result, ODRS often merges several different packages reviews if they install the same software. This snaps reviews are merged with the [RSU's](https://github.com/rsu-client/rsu-client) reviews, Debians runescape APT package reviews, and potentially several different RuneScape packages I'm not aware of. The result of this, is the snap has reviews saying it's broken and a keylogger, published before the snap was ever released. I personally think ODRS is in the wrong here, because the package that installs the software can hugely influence the software it actually installs, up to and including rendering the software entirely unusable in the worst case, as many of these alternate packages are due to lack of maintenance.

As a result, I don't take any consideration into the reviews presented by the ODRS service, because I have to assume that the majority of them simply do not apply to this snap. Whilst I'd prefer they actually reviewed this package by itself and not every runescape package that might happen to exist alongside it, the feedback I get through over sources such as the official forums, Reddit, Discord, etc, is generally positive and I think this is generally more reflective than the comments left in the desktop app stores.

### How do I get in touch / report an issue?
Please use the Github issues functionality, I'll get a notification on my phone about it and it's all nice and convenient for myself.
If it's a problem that exists in the Snap package and doesn't exist in the official package, I'm interested in knowing about it.

Whilst I do look around on the official forums, Reddit, some Discord channels and a few other sources for any problems that might arise, if it isn't sent via Github there's no actual guarantee I'll ever see it.